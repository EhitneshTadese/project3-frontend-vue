var se=Object.defineProperty,ce=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var j=(e,n,a)=>n in e?se(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,h=(e,n)=>{for(var a in n||(n={}))W.call(n,a)&&j(e,a,n[a]);if(k)for(var a of k(n))q.call(n,a)&&j(e,a,n[a]);return e},H=(e,n)=>ce(e,de(n));var N=(e,n)=>{var a={};for(var o in e)W.call(e,o)&&n.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&k)for(var o of k(e))n.indexOf(o)<0&&q.call(e,o)&&(a[o]=e[o]);return a};import{i as fe,h as ve,a1 as xe,a2 as me,U as I,a0 as w,a7 as ge,a8 as he,a9 as we,aa as V,ab as Ve,u as ye,a3 as Fe,e as r,$ as T,F as z,b as J,W as Ce,v as Pe,a5 as A,a6 as be,ac as ke,ad as Ie}from"./index.fcfdb788.js";import{a as Re,b as Se,u as Me,V as K,d as Be,e as He,g as Ne,f as Te}from"./VField.6431dcf7.js";const ze=fe(h(h({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object},Re()),Se()),"VTextarea"),Ue=ve()({name:"VTextarea",directives:{Intersect:xe},inheritAttrs:!1,props:ze(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,n){let{attrs:a,emit:o,slots:c}=n;const s=me(e,"modelValue"),{isFocused:x,focus:L,blur:Q}=Me(e),X=I(()=>typeof e.counterValue=="function"?e.counterValue(s.value):(s.value||"").toString().length),Y=I(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function Z(t,u){var l,i;!e.autofocus||!t||(i=(l=u[0].target)==null?void 0:l.focus)==null||i.call(l)}const _=w(),y=w(),G=ge(""),F=w(),p=I(()=>e.persistentPlaceholder||x.value||e.active);function R(){var t;F.value!==document.activeElement&&((t=F.value)==null||t.focus()),x.value||L()}function ee(t){R(),o("click:control",t)}function te(t){o("mousedown:control",t)}function ae(t){t.stopPropagation(),R(),A(()=>{s.value="",be(e["onClick:clear"],t)})}function ne(t){var l;const u=t.target;if(s.value=u.value,(l=e.modelModifiers)!=null&&l.trim){const i=[u.selectionStart,u.selectionEnd];A(()=>{u.selectionStart=i[0],u.selectionEnd=i[1]})}}const f=w(),C=w(+e.rows),S=I(()=>["plain","underlined"].includes(e.variant));he(()=>{e.autoGrow||(C.value=+e.rows)});function v(){!e.autoGrow||A(()=>{if(!f.value||!y.value)return;const t=getComputedStyle(f.value),u=getComputedStyle(y.value.$el),l=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-input-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),i=f.value.scrollHeight,P=parseFloat(t.lineHeight),M=Math.max(parseFloat(e.rows)*P+l,parseFloat(u.getPropertyValue("--v-input-control-height"))),B=parseFloat(e.maxRows)*P+l||1/0,m=Ie(i!=null?i:0,M,B);C.value=Math.floor((m-l)/P),G.value=ke(m)})}we(v),V(s,v),V(()=>e.rows,v),V(()=>e.maxRows,v),V(()=>e.density,v);let d;return V(f,t=>{t?(d=new ResizeObserver(v),d.observe(f.value)):d==null||d.disconnect()}),Ve(()=>{d==null||d.disconnect()}),ye(()=>{const t=!!(c.counter||e.counter||e.counterValue),u=!!(t||c.details),[l,i]=Fe(a),m=K.filterProps(e),{modelValue:P}=m,M=N(m,["modelValue"]),B=Be(e);return r(K,T({ref:_,modelValue:s.value,"onUpdate:modelValue":g=>s.value=g,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-input--plain-underlined":S.value},e.class],style:e.style},l,M,{centerAffix:C.value===1&&!S.value,focused:x.value}),H(h({},c),{default:g=>{let{id:b,isDisabled:U,isDirty:D,isReadonly:le,isValid:oe}=g;return r(He,T({ref:y,style:{"--v-textarea-control-height":G.value},onClick:ee,onMousedown:te,"onClick:clear":ae,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},B,{id:b.value,active:p.value||D.value,centerAffix:C.value===1&&!S.value,dirty:D.value||e.dirty,disabled:U.value,focused:x.value,error:oe.value===!1}),H(h({},c),{default:ue=>{let{props:ie}=ue,O=ie,{class:E}=O,$=N(O,["class"]);return r(z,null,[e.prefix&&r("span",{class:"v-text-field__prefix"},[e.prefix]),J(r("textarea",T({ref:F,class:E,value:s.value,onInput:ne,autofocus:e.autofocus,readonly:le.value,disabled:U.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:R,onBlur:Q},$,i),null),[[Ce("intersect"),{handler:Z},null,{once:!0}]]),e.autoGrow&&J(r("textarea",{class:[E,"v-textarea__sizer"],id:`${$.id}-sizer`,"onUpdate:modelValue":re=>s.value=re,ref:f,readonly:!0,"aria-hidden":"true"},null),[[Pe,s.value]]),e.suffix&&r("span",{class:"v-text-field__suffix"},[e.suffix])])}}))},details:u?g=>{var b;return r(z,null,[(b=c.details)==null?void 0:b.call(c,g),t&&r(z,null,[r("span",null,null),r(Ne,{active:e.persistentCounter||x.value,value:X.value,max:Y.value,disabled:e.disabled},c.counter)])])}:void 0}))}),Te({},_,y,F)}});export{Ue as V};
